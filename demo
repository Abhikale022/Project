import axios from "axios";

const API_BASE_URL = "http://localhost:8080";

// ===== CUSTOMER SIGNUP =====
const signupCustomer = async (customerData) => {
  try {
    const response = await axios.post(`${API_BASE_URL}/customer/signup`, {
      name: customerData.name,
      email: customerData.email,
      password: customerData.password,
    });
    return response.data;
  } catch (error) {
    console.error("Signup failed:", error.response ? error.response.data : error.message);
    throw error.response?.data || { error: "Signup failed" };
  }
};

// ===== CUSTOMER LOGIN =====
const loginCustomer = async (credentials) => {
  try {
    const response = await axios.post(`${API_BASE_URL}/customer/login`, {
      email: credentials.username,  // username is actually email
      password: credentials.password,
    });
    return response.data;
  } catch (error) {
    console.error("Login failed:", error.response ? error.response.data : error.message);
    throw error.response?.data || { error: "Login failed" };
  }
};

// ===== SALES LOGIN (already done) =====
const loginSalesUser = async (credentials) => {
  try {
    const response = await axios.post(`${API_BASE_URL}/salesuser/login`, {
      userId: credentials.userId,
      password: credentials.password,
    });
    return response.data;
  } catch (error) {
    console.error("Login failed:", error.response ? error.response.data : error.message);
    throw error.response?.data || { error: "Login failed" };
  }
};

const UnifiedLoginModalService = {
  signupCustomer,
  loginCustomer,
  loginSalesUser,
};

export default UnifiedLoginModalService;