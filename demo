@Override
public String generateResetCode(String email) {
    CustomerLoginSignup customer = repository.findByEmail(email)
            .orElseThrow(() -> new RuntimeException("Email not registered"));

    // Generate a 6-digit numeric code
    String code = String.valueOf((int)(Math.random() * 900000) + 100000);
    customer.setResetCode(code);
    repository.save(customer);

    return code; // For dev/testing, return code in response
}

@Override
public void resetPassword(String email, String code, String newPassword) {
    CustomerLoginSignup customer = repository.findByEmailAndResetCode(email, code)
            .orElseThrow(() -> new RuntimeException("Invalid reset code"));

    customer.setPassword(passwordEncoder.encode(newPassword));
    customer.setResetCode(null); // invalidate code
    repository.save(customer);
}